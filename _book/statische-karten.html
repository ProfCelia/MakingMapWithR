<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Statische Karten | Making maps with R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Statische Karten | Making maps with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Statische Karten | Making maps with R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Nico Hahn" />


<meta name="date" content="2019-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="interaktive-karten.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script>
<script src="libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Intro</a></li>
<li class="chapter" data-level="2" data-path="statische-karten.html"><a href="statische-karten.html"><i class="fa fa-check"></i><b>2</b> Statische Karten</a><ul>
<li class="chapter" data-level="2.1" data-path="statische-karten.html"><a href="statische-karten.html#tmap"><i class="fa fa-check"></i><b>2.1</b> tmap</a></li>
<li class="chapter" data-level="2.2" data-path="statische-karten.html"><a href="statische-karten.html#karten-objekte"><i class="fa fa-check"></i><b>2.2</b> Karten Objekte</a></li>
<li class="chapter" data-level="2.3" data-path="statische-karten.html"><a href="statische-karten.html#asthetik"><i class="fa fa-check"></i><b>2.3</b> Ã„sthetik</a></li>
<li class="chapter" data-level="2.4" data-path="statische-karten.html"><a href="statische-karten.html#layouts"><i class="fa fa-check"></i><b>2.4</b> Layouts</a></li>
<li class="chapter" data-level="2.5" data-path="statische-karten.html"><a href="statische-karten.html#inset-maps"><i class="fa fa-check"></i><b>2.5</b> Inset maps</a></li>
<li class="chapter" data-level="2.6" data-path="statische-karten.html"><a href="statische-karten.html#facettierte-und-animierte-karten"><i class="fa fa-check"></i><b>2.6</b> Facettierte und animierte Karten</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="interaktive-karten.html"><a href="interaktive-karten.html"><i class="fa fa-check"></i><b>3</b> Interaktive Karten</a></li>
<li class="chapter" data-level="4" data-path="karten-mit-shiny.html"><a href="karten-mit-shiny.html"><i class="fa fa-check"></i><b>4</b> Karten mit Shiny</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Making maps with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="statische-karten" class="section level1">
<h1><span class="header-section-number">2</span> Statische Karten</h1>
<p>Am hÃ¤ufigsten werden geographische Daten mit Hilfe von statischen Karten dargestellt, die als <code>.png</code> oder <code>.pdf</code> Datei abgespeichert werden kÃ¶nnen. UrsprÃ¼nglich konnten in R nur auf diese Art Daten visualisiert werden, doch durch die Entwicklung neuer Pakete, allen voran <strong>sp</strong>, wurden neue MÃ¶glichkeiten zur Darstellung dieser Daten geschaffen. Doch trotz neuen Methoden wie interaktiven Karten sind statische Karten auch heute noch das Steckenpferd der Datenvisualisierung in R.</p>
<div id="tmap" class="section level2">
<h2><span class="header-section-number">2.1</span> tmap</h2>
<p>Die schnellste MÃ¶glichkeit zur Erstellung von Karten in R ist die Verwendung der <code>plot()</code> Funktion, mit der Vektor- und Rasterdaten simplistisch dargestellt werden kÃ¶nnen. Durch die Verwendung mehrerer Argumente, wie beispielsweise <code>col</code>, kÃ¶nnen die Graphiken gestylt werden, um mehr Informationen zu Ã¼bermitteln. Eine weitere MÃ¶glichkeit stellt das Paket <strong>grid</strong> dar, mit dem mehr Kontrolle mÃ¶glich ist. Ein Paket, dass speziell zur Illustration von Geodaten entwickelt wurde, ist <strong>tmap</strong>. Dieses hat eine kompakte Syntax, Ã¤hnlich der von <strong>ggplot2</strong>. Des weiteren kÃ¶nnen statische Karten durch die Verwendung des Befehls <code>tmap_mode()</code> schnell in interaktive Karten umgewandelt werden und umgekehrt. AuÃŸerdem werden die meiÃŸten geographischen Klassen als input akzeptiert, im Vergleich zu anderen Paketen, auch <code>raster</code> Daten.</p>
<p>Wie bereits erwÃ¤hnt Ã¤hnelt die Syntax von <strong>tmap</strong> der von <strong>ggplot2</strong>. Dies beinhaltet eine strikte Trennung zwischen den Daten und der Ã„sthetik. Zu Beginn wird <code>tm_shape()</code> ein Datensatz Ã¼bergeben, gefolgt von ein oder mehreren Ebene, die die Art der Darstellung definieren. Dazu zÃ¤hlen beispielhaft <code>tm_fill()</code> und <code>tm_dots()</code> um Daten als Polygone beziehungsweise Punkte zu plotten.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>()
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>()
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>()</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:chunk1"></span>
<img src="_main_files/figure-html/chunk1-1.png" alt="Einfaches Beispiel" width="672" />
<p class="caption">
Figure 2.1: Einfaches Beispiel
</p>
</div>
<p>Das hier Ã¼bergebene Objekt <code>bavaria</code> hat die Klasse <code>sf</code> und stellt die einzelnen StÃ¤dte und Landkreis Bayerns dar. <code>tm_fill()</code> fÃ¼llt die einzelnen Polygone, wodurch ein gefÃ¼llter Grundriss Bayerns entsteht . <code>tm_borders()</code> zeichnet die Grenzen der einzelnen Polygone und <code>tm_polygons()</code> vereint die beiden Funktionen und stellt beides gleichzeitig dar. Durch den <code>+</code> Operator kÃ¶nnen weitere Ebene hinzugefÃ¼gt werden, mit denen verschiedene Arten von geographischen Daten visualisiert werden kÃ¶nnen.</p>
</div>
<div id="karten-objekte" class="section level2">
<h2><span class="header-section-number">2.2</span> Karten Objekte</h2>
<p>Mit <strong>tmap</strong> kÃ¶nnen Objekte nicht nur geplotted werden, sondern auch als Objekte der Klasse <code>&quot;tmap&quot;</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map_europe &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(europe_raster) <span class="op">+</span><span class="st"> </span><span class="kw">tm_raster</span>()
<span class="kw">class</span>(map_europe)</code></pre></div>
<pre><code>## [1] &quot;tmap&quot;</code></pre>
<p>Das gespeicherte Objekte kann so einfach erweitert werden, oder zu einem spÃ¤teren Zeitpunkt in der Konsole aufgerufen werden. Des weiteren kÃ¶nnen zu dem Objekt weitere Ebenen mit <code>tm_shape()</code> hinzugefÃ¼gt werden, wodurch mehrere Karten zu einer kombiniert werden kÃ¶nnen. Im folgenden Codebeispiel wird auf dem obigen Code, der ein HÃ¶henraster von Europa darstellt, aufgebaut. Dabei werden zunÃ¤chst die Grenzlinien der einzelnen Staaten hinzugefÃ¼gt, gefolgt von allen StÃ¤dten mit Ã¼ber einer Millionen Einwohnern.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map_europe2 &lt;-<span class="st"> </span>map_europe <span class="op">+</span><span class="st"> </span><span class="kw">tm_shape</span>(europe_shape) <span class="op">+</span><span class="st"> </span><span class="kw">tm_lines</span>(<span class="dt">alpha =</span> <span class="fl">0.3</span>)
map_europe3 &lt;-<span class="st"> </span>map_europe2  <span class="op">+</span><span class="st"> </span><span class="kw">tm_shape</span>(cities) <span class="op">+</span><span class="st"> </span><span class="kw">tm_dots</span>(<span class="dt">size =</span> <span class="fl">0.3</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-5"></span>
<img src="_main_files/figure-html/unnamed-chunk-5-1.png" alt="Verwendung mehrerer Ebenen" width="672" />
<p class="caption">
Figure 2.2: Verwendung mehrerer Ebenen
</p>
</div>
<p>Durch das speichern der einzelnen Karten als Objekte kÃ¶nnen diese auch mit Hilfe der Funktion <code>tmap_arrange()</code> neben- oder Ã¼bereinander dargestellt werden. Grafik  wurde durch diesen Befehl erstellt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tmap_arrange</span>(bav_<span class="dv">1</span>, bav_<span class="dv">2</span>, bav_<span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</code></pre></div>
<p>Der Nutzer ist nicht limitiert in der Anzahl an Ebenen, die er hinzufÃ¼gen kann. Dabei sollte jedoch beachtet werden, dass bei zu viel Informationen der Betrachter schnell Ã¼berfordert sein kann.</p>
</div>
<div id="asthetik" class="section level2">
<h2><span class="header-section-number">2.3</span> Ã„sthetik</h2>
<p>Bei den bisherigen Plots wurden die Standard Einstellungen von <strong>tmap</strong> verwendet. Zur Gestaltung visuell ansprechender Karten, kÃ¶nnen diese Ã¼berschrieben werden. Dabei gibt es zwei MÃ¶glichkeiten: - Konstante Ã„sthetik - Ã„sthetik die sich mit VariablenausprÃ¤gung Ã¤ndert Im Vergleich zu <strong>ggplot2</strong> wird keine Helferfunktion (<code>aes()</code>) verwendet, um die Gestaltung der Karte zu individualisieren. Stattdessen werden die Argumente direkt Ã¼bergeben. Zu den am hÃ¤ufigsten verwendeten Argumenten zÃ¤hlt die FÃ¼llfarbe (<code>col</code>), die Transparenz (<code>alpha</code>), die StrichstÃ¤rke (<code>lwd</code>) und die Linienart (<code>lty</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bav1 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>)
bav2 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_fill</span>(<span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)
bav3 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="dt">border.col =</span> <span class="st">&quot;orange&quot;</span>)
bav4 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>(<span class="dt">lwd =</span> <span class="dv">2</span>)
bav5 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_borders</span>(<span class="dt">lty =</span> <span class="dv">4</span>)
bav6 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;#E2E2E2&quot;</span>, <span class="dt">border.alpha =</span> <span class="fl">0.5</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)
<span class="kw">tmap_arrange</span>(bav1, bav1, bav3, bav4, bav5, bav6, <span class="dt">ncol =</span> <span class="dv">3</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-7"></span>
<img src="_main_files/figure-html/unnamed-chunk-7-1.png" alt="Verwendung verschiedener Argumente" width="672" />
<p class="caption">
Figure 2.3: Verwendung verschiedener Argumente
</p>
</div>
<p>Ein weiterer Unterschied zu <strong>ggplot2</strong> besteht darin, dass die Variablen Namen als character Ã¼bergeben werden mÃ¼ssen und der <code>$</code> Operator somit nicht verwendet werden kann.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> bavaria<span class="op">$</span>Bevoelkerungsentwicklung)</code></pre></div>
<pre><code>## Error: Fill argument neither colors nor valid variable name(s)</code></pre>
<p>Die gewÃ¼nschte Grafik wird mit folgendem Code erreicht:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Bevoelkerungsentwicklung&quot;</span>, <span class="dt">midpoint =</span> <span class="dv">0</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-10"></span>
<img src="_main_files/figure-html/unnamed-chunk-10-1.png" alt="BevÃ¶lkerungsentwicklung in Bayern von 2011 bis 2015" width="672" />
<p class="caption">
Figure 2.4: BevÃ¶lkerungsentwicklung in Bayern von 2011 bis 2015
</p>
</div>
Das <code>midpoint</code> Argument wird hier verwendet, um den Wert 0 als natÃ¼rlichen Mittelpunkt zu verwenden. In der resultierenden Karte ist zu erkennen, dass die BevÃ¶lkerung im Norden Bayerns zurÃ¼ckgeht, wÃ¤hrend vor allem um MÃ¼nchen herum die BevÃ¶lkerung starkt ansteigt.
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-11"></span>
<img src="_main_files/figure-html/unnamed-chunk-11-1.png" alt="Karte in base R" width="672" />
<p class="caption">
Figure 2.5: Karte in base R
</p>
</div>
<p>Am Beispiel der letzten Karten ist zu sehen, dass <strong>tmap</strong> automatisch eine Farbpalette und Intervalle auswÃ¤hlt. Um andere Intervalle zu verwenden kann entweder dem <code>breaks</code> Argument manuelle Grenzen Ã¼bergeben werden oder mit <code>n</code> die Anzahl der bins festgelegt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Durchschnittsalter&quot;</span>)
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Durchschnittsalter&quot;</span>, <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">42</span>, <span class="dv">46</span>, <span class="dv">54</span>))
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Durchschnittsalter&quot;</span>, <span class="dt">n =</span> <span class="dv">3</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-13"></span>
<img src="_main_files/figure-html/unnamed-chunk-13-1.png" alt="Illustration des breaks und n Arguments" width="672" />
<p class="caption">
Figure 2.6: Illustration des breaks und n Arguments
</p>
</div>
<p>Ein Alternative dazu ist das <code>style</code> Argument. Dadurch kann die Klassenbildung mit Hilfe von Algorithmen erfolgen. Unteranderem kÃ¶nnen folgende styles Ã¼bergeben werden: - <code>style = pretty</code>: Rundet Intervallgrenzen zu ganzen Nummern. Ist die Standardeinstellung - <code>style = equal</code>: Teilt die Variable in Intervalle von gleicher LÃ¤nge auf. Sollte nur benutzt werden, wenn die Variable gleichverteilt ist. - <code>style = quantile</code>: Teilt die Variable in Quantile auf. Somit sind in jedem Intervall gleich viele Beobachtungen. - <code>style = jenks</code>: Identifiziert Gruppen mit Ã¤hnlichen Werten und maximiert den Unterschied zwischen ihnen. - <code>style = cont</code>: Stellt viele Farben Ã¼ber eine kontinuerliche Palette dar. - <code>style = cat</code>: FÃ¤rbt bei kategorialen Daten jede Kategorie individuell ein. Weitere MÃ¶glichkeiten wÃ¤ren <code>cat</code>, <code>fixed</code>, <code>sd</code>, <code>kmeans</code>, <code>hclust</code>, <code>bclust</code>, und <code>fisher</code>.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-14"></span>
<img src="_main_files/figure-html/unnamed-chunk-14-1.png" alt="Arbeitslosenquote in Bayern und Verteilung von StÃ¤dten und Landkreisen" width="768" />
<p class="caption">
Figure 2.7: Arbeitslosenquote in Bayern und Verteilung von StÃ¤dten und Landkreisen
</p>
</div>
<p>Eine letzte MÃ¶glichkeit um das Aussehen einer Karte zu beeinflussen besteht in der Farbwahl der einzelnen Klassen. Der Nutzer kann Ã¼ber das Argument <code>palette</code>. Diesem kann der Name einer bekannte Palette aus dem <strong>RColorBrewer</strong> oder <strong>Viridis</strong> Paket Ã¼bergeben werden. Soll die Reihenfolge der Palette umgedreht werden, kann zu Beginn des characters ein <code>-</code> hinzugefÃ¼gt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Arbeitslosenquote&quot;</span>, <span class="dt">palette =</span> <span class="st">&quot;viridis&quot;</span>)
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Arbeitslosenquote&quot;</span>, <span class="dt">palette =</span> <span class="st">&quot;-viridis&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-16"></span>
<img src="_main_files/figure-html/unnamed-chunk-16-1.png" alt="Umdrehen einer Palette" width="672" />
<p class="caption">
Figure 2.8: Umdrehen einer Palette
</p>
</div>
<p>Bei den Paletten aus den beiden Paketen kann zwischen drei Arten von Paletten unterschieden werden: - Sequentielle Paletten: Folgen einem Farbverlauf von hell zu dunkel. Sollten fÃ¼r stetige Variablen verwendet werden. - Divergierende Paletten: Folgen einem Farbverlauf von dunkel zu hell, zu dunkel. Sollten fÃ¼r stetige Variablen mit einem natÃ¼rlichen Mittelpunkt (<code>midpoint</code>) verwendet werden. - Kategoriale Paletten: Leicht zu unterscheidbare Farben, ideal fÃ¼r kategoriale Daten. Alternativ kann auch eine eigenene Palette Ã¼bergeben werden, hierfÃ¼r kÃ¶nnten HEX-Codes verwendet werden. Bei der Farbwahl sollte auf weiteres geachtet werden: Farben Ã¼bertragen GefÃ¼hle. Beispielhaft wird rot mit negativen Sachen assoziert, wÃ¤hrend grÃ¼n mit positiven Dingen in Verbindung gebracht wird. Dieses Beispiel kann auch auf geographische Merkmale erweitert werden. GrÃ¼n steht fÃ¼r WÃ¤lder und blau fÃ¼r GewÃ¤sser. AuÃŸerdem sollte bei Verwendung eine Palette klar sein, welche Farbe fÃ¼r niedrigere beziehungsweise hÃ¶here Werte steht. Damit eine mÃ¶glichst breite Masse an Menschen eine Karte interpretieren kann, sollte wenn mÃ¶glich auch darauf geachtet werden, dass farbenblinde Menschen die Unterschiede zwischen den Klassen identifizieren kÃ¶nnen.</p>
</div>
<div id="layouts" class="section level2">
<h2><span class="header-section-number">2.4</span> Layouts</h2>
<p>AuÃŸer der MÃ¶glichkeit die Karte an sich zu verÃ¤ndern, existiert die MÃ¶glichkeit andere Elemente der Grafik zu editieren. Mit Hilfe von Funktionen wie <code>tm_compass()</code>, <code>tm_scale_bar()</code>, <code>tm_logo()</code>, <code>tm_style()</code> und <code>tm_layout</code> lassen sich Karten um die verschiedensten Elemente erweitern. Mit Hilfe der ersten drei dieser Funktion lassen sich ein Kompass, eine MaÃŸstabsleiste und Bilder hinzufÃ¼gen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Art&quot;</span>, <span class="dt">pal =</span> <span class="kw">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;skyblue&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_logo</span>(<span class="st">&quot;bavaria.png&quot;</span>, <span class="dt">height =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_scale_bar</span>(<span class="dt">position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>), <span class="dt">width =</span> <span class="fl">0.15</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_compass</span>(<span class="dt">position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;top&quot;</span>), <span class="dt">size =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-18"></span>
<img src="_main_files/figure-html/unnamed-chunk-18-1.png" alt="Bayernkarte mit zusÃ¤tzlichen Elementen" width="672" />
<p class="caption">
Figure 2.9: Bayernkarte mit zusÃ¤tzlichen Elementen
</p>
</div>
<p>Mit Hilfe von <code>tm_layout()</code> kann eine Vielzahl an Eigenschaften der Karten geÃ¤ndert werden. So kann ein Titel oder eine Hintergrundfarbe hinzugefÃ¼gt werden, die Skalierung geÃ¤ndert werden oder der Rahmen und die Legende entfernt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>()
    <span class="op">+</span><span class="st"> </span><span class="kw">tm_layout</span>(<span class="dt">title =</span> <span class="st">&quot;Bayern&quot;</span>, <span class="dt">bg.color =</span> <span class="st">&quot;#228B22&quot;</span>)
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>()
    <span class="op">+</span><span class="st"> </span><span class="kw">tm_layout</span>(<span class="dt">scale =</span> <span class="dv">3</span>, <span class="dt">frame =</span> <span class="ot">FALSE</span>)
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Art&quot;</span>)
    <span class="op">+</span><span class="st"> </span><span class="kw">tm_layout</span>(<span class="dt">frame.lwd =</span> <span class="dv">3</span>, <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>))
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Art&quot;</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw">tm_layout</span>(<span class="dt">inner.margins =</span> <span class="fl">0.2</span>, <span class="dt">legend.show =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-20"></span>
<img src="_main_files/figure-html/unnamed-chunk-20-1.png" alt="Einige Layout Einstellungen" width="672" />
<p class="caption">
Figure 2.10: Einige Layout Einstellungen
</p>
</div>
<p>AuÃŸerdem kann Schriftart und -grÃ¶ÃŸe geÃ¤ndert werden, sowie mit Hilfe visueller Filter, beispielsweise Sepia oder Schwarz-WeiÃŸ, das Aussehen weiter angepasst werden. Durch Verwendung von <code>tm_style()</code> kÃ¶nnen vordefinierte Stile verwendet werden, um Karten zum Beispiel einen Old-School-Look zu geben oder sie fÃ¼r Farbenblinde zu optimieren. Einen ÃƒÂƒÃ‚Âœberblick Ã¼ber die verfÃ¼gbaren Stile bietet die Funktion <code>tmap_style_catalog()</code>, die im aktuellen Arbeitsverzeichnis einen Ordner anlegt, der verschiedene Karten enthÃ¤lt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Art&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_style</span>(<span class="st">&quot;classic&quot;</span>)
<span class="kw">tm_shape</span>(bavaria) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;Art&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_style</span>(<span class="st">&quot;col_blind&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-22"></span>
<img src="_main_files/figure-html/unnamed-chunk-22-1.png" alt="Klassicher und farbenblinder Stil" width="672" />
<p class="caption">
Figure 2.11: Klassicher und farbenblinder Stil
</p>
</div>
</div>
<div id="inset-maps" class="section level2">
<h2><span class="header-section-number">2.5</span> Inset maps</h2>
<p>Manchmal kÃ¶nnen nicht alle Informationen effektiv mit nur einer Karte dargestellt werden, beispielsweise um zusÃ¤tzlichen Informationen zu Ã¼bermitteln. Mit Hilfe der <code>print</code> und <code>viewport</code> Funktionen kÃ¶nnen mehrere kleinere Karten zu einer groÃŸen hinzugefÃ¼gt werden. In dem nachfolgenden Beispiel sind die StÃ¤dte und Gemeinden des Landkreis Rosenheim dargestellt. Da mÃ¶glicherweise nicht alle Betrachter wissen, wo sich der Landkreis befindet, wird noch eine Bayern Karte mit einer Bounding Box um den Landkreis herum hinzugefÃ¼gt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map_rosenheim
<span class="kw">print</span>(bayern, <span class="dt">vp =</span> grid<span class="op">::</span><span class="kw">viewport</span>(<span class="fl">0.8</span>, <span class="fl">0.185</span>, <span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">height =</span> <span class="fl">0.45</span>))</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-24"></span>
<img src="_main_files/figure-html/unnamed-chunk-24-1.png" alt="StÃ¤dte und Gemeinden des Landkreis Rosenheim" width="672" />
<p class="caption">
Figure 2.12: StÃ¤dte und Gemeinden des Landkreis Rosenheim
</p>
</div>
<p>Eine weiteres Anwendungsgebiete dieser Art von Karten ist die Darstellung von Regionen die weit voneinander entfernt sind. Im folgenden Beispiel werden alle 50 Staaten der USA in einer Grafik dargestellt, unter BerÃ¼cksichtigung der GrÃ¶ÃŸen der einzelnen Staaten. Da Hawaii und Alaska zu weit von den restlichen 48 Staaten entfernt sind, wÃ¤re eine einzelne Karte nicht die beste LÃ¶sung, weswegen drei Karten erstellt und zusammengefÃ¼gt werden. Zuerst wird die Projektion der 48 Staaten in eine equal are projection geÃ¤ndert, die anderen beiden DatensÃ¤tze haben diese bereits.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">us_states2163 &lt;-<span class="st"> </span><span class="kw">st_transform</span>(us_states, <span class="dv">2163</span>)</code></pre></div>
<p>Um die Karten mÃ¶glichst getreu ihrer GrÃ¶ÃŸe darzustellen, wird fÃ¼r jede der drei Karten die Differenz zwischen dem grÃ¶ÃŸten und kleinsten y-Wert berechnet. DafÃ¼r werden bounding boxes verwendet. AnschlieÃŸend werden die Faktoren berechnet, um die die Karten von Alaska und Hawaii grÃ¶ÃŸer beziehungsweise kleiner sind, als die der restlichen 48 Staaten.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">us_states_range &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(us_states2163)[<span class="dv">4</span>] <span class="op">-</span><span class="st"> </span><span class="kw">st_bbox</span>(us_states2163)[<span class="dv">2</span>]
hawaii_range &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(hawaii)[<span class="dv">4</span>] <span class="op">-</span><span class="st"> </span><span class="kw">st_bbox</span>(hawaii)[<span class="dv">2</span>]
alaska_range &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(alaska)[<span class="dv">4</span>] <span class="op">-</span><span class="st"> </span><span class="kw">st_bbox</span>(alaska)[<span class="dv">2</span>]
us_states_hawaii_ratio &lt;-<span class="st"> </span>hawaii_range <span class="op">/</span><span class="st"> </span>us_states_range
us_states_alaska_ratio &lt;-<span class="st"> </span>alaska_range <span class="op">/</span><span class="st"> </span>us_states_range</code></pre></div>
<p>AnschlieÃŸend werden die drei Karten erstellt. <code>legend.is.portrait = FALSE</code> sorgt dafÃ¼r, dass die Legende horizontal angeordnet wird, anstatt von vertikal. MIT LEGENDE NICHT MEHR SKALIERT DUCK IT I HATE MY LIFE</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">us_states_map &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(us_states2163) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;total_pop_15&quot;</span>,
              <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5000000</span>, <span class="dv">10000000</span>,
                         <span class="dv">15000000</span>, <span class="dv">20000000</span>,
                         <span class="dv">25000000</span>, <span class="dv">30000000</span>,
                         <span class="dv">35000000</span>, <span class="dv">40000000</span>),
              <span class="dt">title =</span> <span class="st">&quot;Population 2015 in Millionen&quot;</span>,
              <span class="dt">pal =</span> <span class="kw">c</span>(<span class="st">&quot;#E1F5C4&quot;</span>, <span class="st">&quot;#EDE574&quot;</span>, <span class="st">&quot;#F9D423&quot;</span>, <span class="st">&quot;#FC913A&quot;</span>, <span class="st">&quot;#FF4E50&quot;</span>),
              <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;0-5&quot;</span>, <span class="st">&quot;5-10&quot;</span>, <span class="st">&quot;10-15&quot;</span>, <span class="st">&quot;15-20&quot;</span>, <span class="st">&quot;20-25&quot;</span>,
                         <span class="st">&quot;25-30&quot;</span>, <span class="st">&quot;30-35&quot;</span>, <span class="st">&quot;35-40&quot;</span>),
              <span class="dt">legend.is.portrait =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>,
            <span class="dt">legend.outside =</span> <span class="ot">TRUE</span>, <span class="dt">legend.outside.position =</span> <span class="st">&quot;bottom&quot;</span>)
hawaii_map &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(hawaii) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;total_pop_15&quot;</span>,
              <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5000000</span>, <span class="dv">10000000</span>,
                         <span class="dv">15000000</span>, <span class="dv">20000000</span>,
                         <span class="dv">25000000</span>, <span class="dv">30000000</span>,
                         <span class="dv">35000000</span>, <span class="dv">40000000</span>),
              <span class="dt">pal =</span> <span class="kw">c</span>(<span class="st">&quot;#E1F5C4&quot;</span>, <span class="st">&quot;#EDE574&quot;</span>, <span class="st">&quot;#F9D423&quot;</span>, <span class="st">&quot;#FC913A&quot;</span>, <span class="st">&quot;#FF4E50&quot;</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">title =</span> <span class="st">&quot;Hawaii&quot;</span>, <span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">bg.color =</span> <span class="ot">NA</span>,
            <span class="dt">legend.show =</span> <span class="ot">FALSE</span>, <span class="dt">title.position =</span> <span class="kw">c</span>(<span class="st">&quot;LEFT&quot;</span>, <span class="st">&quot;BOTTOM&quot;</span>))
alaska_map &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(alaska) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;total_pop_15&quot;</span>,
              <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5000000</span>, <span class="dv">10000000</span>,
                         <span class="dv">15000000</span>, <span class="dv">20000000</span>,
                         <span class="dv">25000000</span>, <span class="dv">30000000</span>,
                         <span class="dv">35000000</span>, <span class="dv">40000000</span>),
              <span class="dt">pal =</span> <span class="kw">c</span>(<span class="st">&quot;#E1F5C4&quot;</span>, <span class="st">&quot;#EDE574&quot;</span>, <span class="st">&quot;#F9D423&quot;</span>, <span class="st">&quot;#FC913A&quot;</span>, <span class="st">&quot;#FF4E50&quot;</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">title =</span> <span class="st">&quot;Alaska&quot;</span>, <span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">bg.color =</span> <span class="ot">NA</span>, <span class="dt">legend.show =</span> <span class="ot">FALSE</span>,
            <span class="dt">title.position =</span> <span class="kw">c</span>(<span class="st">&quot;LEFT&quot;</span>, <span class="st">&quot;TOP&quot;</span>))</code></pre></div>
<p>Mit <code>grid.layout</code> wird ein Fenster mit zwei Reihen und einer Spalte definiert. Die HÃ¶he der einzelnen Reihen hÃ¤ngt vom VerhÃ¤ltnis der “HÃ¶he” von Alaska und den 48 Staaten ab. Danach werden die drei Karten eingefÃ¼gt, bei Hawaii hÃ¤ngt die “HÃ¶he” wieder vom VerhÃ¤ltnis zu den 48 Staaten ab. Mit <code>grid.lines</code> werden noch Linien hinzugefÃ¼gt um die Karten besser voneinander abzutrennen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pushViewport</span>(<span class="kw">viewport</span>(
  <span class="dt">layout =</span>
    <span class="kw">grid.layout</span>(<span class="dv">2</span>, <span class="dv">1</span>,
                <span class="dt">heights =</span> <span class="kw">unit</span>(<span class="kw">c</span>(us_states_alaska_ratio, <span class="dv">1</span>), <span class="st">&quot;null&quot;</span>)
                )
  ))
<span class="kw">print</span>(alaska_map, <span class="dt">vp =</span> <span class="kw">viewport</span>(<span class="dt">layout.pos.row =</span> <span class="dv">1</span>))
<span class="kw">print</span>(us_states_map, <span class="dt">vp =</span> <span class="kw">viewport</span>(<span class="dt">layout.pos.row =</span> <span class="dv">2</span>))
<span class="kw">print</span>(hawaii_map, <span class="dt">vp =</span> <span class="kw">viewport</span>(<span class="dt">x =</span> <span class="fl">0.1</span>, <span class="dt">y =</span> <span class="fl">0.07</span>,
                                <span class="dt">height =</span> us_states_hawaii_ratio <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(<span class="kw">c</span>(us_states_alaska_ratio, <span class="dv">1</span>))))
<span class="kw">grid.lines</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="fl">0.58</span>, <span class="fl">0.58</span>), <span class="dt">gp =</span> <span class="kw">gpar</span>(<span class="dt">lty =</span> <span class="dv">2</span>))
<span class="kw">grid.lines</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.2</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="fl">0.33</span>, <span class="dv">0</span>), <span class="dt">gp =</span> <span class="kw">gpar</span>(<span class="dt">lty =</span> <span class="dv">2</span>))</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-28"></span>
<img src="_main_files/figure-html/unnamed-chunk-28-1.png" alt="Einwohnerzahlen der Bundesstaaten in den USA" width="672" />
<p class="caption">
Figure 2.13: Einwohnerzahlen der Bundesstaaten in den USA
</p>
</div>
</div>
<div id="facettierte-und-animierte-karten" class="section level2">
<h2><span class="header-section-number">2.6</span> Facettierte und animierte Karten</h2>
<p>Neben der MÃ¶glichkeit verschiedene Elemente der Karten basierend auf einer Variablen zu Ã¤ndern, kÃ¶nnen Karten basierend auf einer Variable in mehrere Karten unterteilt werden. Was in <strong>ggplot2</strong> mit <code>facet_wrap()</code> gemacht wird, wird in <strong>tmap</strong> mit <code>tm_facets()</code> erledigt. Soll eine zeitliche Variable dargestellt werden, geht dies schlecht mit einer Karten, da sich die Geometrien hÃ¤ufig Ã¼berlappen wÃ¼rden. Besonders in diesen FÃ¤llen ist die Verwendung facettierter Karten sinnvoll. Die Funktion hat fÃ¼nf wichtige Argumente: - <code>by</code>: Nach welcher Variable soll aufgeteilt werden? - <code>nrow / ncol</code>: Die Anzahl der Zeilen beziehungsweise Spalten der Facetten - <code>free.cords</code>: Soll jede einezlne Karte ein eigenes Koordinatensystem haben? - <code>along</code>: Soll anstatt von Facetten eine Animation erstellt werden?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tm_shape</span>(honey0912) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;priceperlb&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;cont&quot;</span>,
                                  <span class="dt">pal =</span> <span class="kw">viridis</span>(<span class="dv">10</span>, <span class="dt">direction =</span> <span class="op">-</span><span class="dv">1</span>),
                                  <span class="dt">title =</span> <span class="st">&quot;Price in US$ per lb&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_facets</span>(<span class="dt">by =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">ncol =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">legend.outside.size =</span> <span class="fl">0.2</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-30-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ein Problem dieser Art von Karten ist, dass mit mehr AusprÃ¤gungen einer Variable mehr Karten erstellt werden wodurch es schnell unÃ¼bersichtlich wird und Unterschiede zwischen den einzelnen Karten nur noch sehr schwer zu erkennen sind. Dieses Problem wird von animierten Karten gelÃ¶st. In Papern kÃ¶nnen diese nicht dargestellt werden, allerdings werden heutzutage immer mehr Informationen online abgerufen, was dieses Problem mindert. Der Autor eines Artikels kann alternativ auch einen Link zu der animierten Karten in seinen Text einbauen. Wie bereits erwÃ¤hnt kann mit dem Argument <code>along = TRUE</code> der Funktion <code>tm_facets()</code> eine animierte Karte erstellt werden. Mit Hilfe der Funktion <code>tmap_animation()</code> kann die erstellt Animation als GIF Datei abgespeichert werden, allerdings wird dafÃ¼r die Software <strong>ImageMagick</strong> benÃ¶tigt. Diese kann mit Hilfe des <strong>installr</strong> Pakets installiert werden. (<code>installr::install.imagemagick()</code>) Die folgende Animation stellt ebenfalls den durchschnittlichen Preis eines Pfunds Honing in US$ dar, dieses mal Ã¼ber einen Zeitraum von 15 Jahren. Mittels <code>delay</code> kann angegeben werden, wieviel Millisekunden zwischen den einzelnen Bildern vergehen sollen. Mit <code>width</code> und <code>height</code> kÃ¶nnen noch die MaÃŸe in Pixel angegeben werden, mit <code>loop</code> ob das GIF eine Endlosschleife ist oder nach einer bestimmten Anzahl an Runden endet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">honey_animation &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(honey) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;priceperlb&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;cont&quot;</span>,
                                  <span class="dt">pal =</span> <span class="kw">viridis</span>(<span class="dv">10</span>, <span class="dt">direction =</span> <span class="op">-</span><span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">tm_facets</span>(<span class="dt">by =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">along =</span> <span class="ot">TRUE</span>)
<span class="kw">tmap_animation</span>(honey_animation, <span class="dt">filename =</span> <span class="st">&quot;honey.gif&quot;</span>, <span class="dt">delay =</span> <span class="dv">25</span>)</code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interaktive-karten.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
